<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rollup node</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-6dee36f6.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-abe0f0b0.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Rollup node</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Welcome to the Scroll Rollup Node documentation.</p>
<h2 id="what-is-scroll"><a class="header" href="#what-is-scroll">What is Scroll?</a></h2>
<p>Scroll is a zkRollup on Ethereum that enables scaling while maintaining security and decentralization through
zero-knowledge proofs. By moving computation and state storage off-chain while posting transaction data and validity
proofs to Ethereum L1, Scroll achieves higher throughput and lower transaction costs while inheriting Ethereum’s
security guarantees.</p>
<h2 id="what-is-the-rollup-node"><a class="header" href="#what-is-the-rollup-node">What is the Rollup Node?</a></h2>
<p>The rollup node is responsible for following the Scroll L2 chain using P2P data from the Scroll network, and
consolidating this information with data posted to Ethereum L1.
At its core, the rollup node implements a derivation function: given the L1 chain state, it deterministically produces
the corresponding L2 chain. This allows it to follow the correct L2 chain in case malicious blocks are propagated on
the P2P network.</p>
<h3 id="derivation-function"><a class="header" href="#derivation-function">Derivation Function</a></h3>
<p>The derivation process works by:</p>
<ol>
<li><strong>Monitoring L1</strong>: Watching for batch commitments, finalization events, and cross-chain messages posted to Ethereum</li>
<li><strong>Decoding Batches</strong>: Extracting and decoding batch data (including blob data) to reconstruct transaction lists</li>
<li><strong>Building Payloads</strong>: Constructing execution payloads with the appropriate transactions and L1 messages</li>
<li><strong>Executing Blocks</strong>: Applying payloads through the execution engine to advance the L2 state</li>
</ol>
<h3 id="architecture"><a class="header" href="#architecture">Architecture</a></h3>
<p>Built on the Reth framework, the rollup node employs an event-driven architecture where specialized components
communicate through async channels:</p>
<ul>
<li><strong>L1 Watcher</strong>: Tracks L1 events and maintains awareness of chain reorganizations</li>
<li><strong>Derivation Pipeline</strong>: Transforms batch data from L1 into executable L2 payloads</li>
<li><strong>Engine Driver</strong>: Interfaces with the execution engine via the Engine API</li>
<li><strong>Chain Orchestrator</strong>: Coordinates the overall flow from L1 events to L2 blocks</li>
<li><strong>Network Layer</strong>: Participates in the Scroll and Ethereum P2P network</li>
</ul>
<h3 id="node-modes"><a class="header" href="#node-modes">Node Modes</a></h3>
<p>The rollup node can operate in different configurations:</p>
<ul>
<li><strong>Follower Node</strong>: Follows the L2 chain via P2P propagated blocks, consolidated by processing batch data posted to L1</li>
<li><strong>Sequencer Node</strong>: Actively sequences new transactions into blocks and posts batches to L1</li>
</ul>
<h2 id="about-this-documentation"><a class="header" href="#about-this-documentation">About This Documentation</a></h2>
<p>This documentation provides comprehensive guides for operating and understanding the Scroll rollup node, including setup
instructions, configuration options, architecture details, and troubleshooting guidance.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="running-a-scroll-rollup-node"><a class="header" href="#running-a-scroll-rollup-node">Running a Scroll Rollup Node</a></h1>
<p>This guide covers how to run a Scroll rollup node as a follower node.</p>
<h2 id="hardware-requirements"><a class="header" href="#hardware-requirements">Hardware Requirements</a></h2>
<p>The following are the recommended hardware specifications for running a Scroll rollup node:</p>
<h3 id="recommended-requirements"><a class="header" href="#recommended-requirements">Recommended Requirements</a></h3>
<ul>
<li><strong>CPU</strong>: 2 cores @ 3 GHz</li>
<li><strong>Memory</strong>: 16 GB RAM</li>
</ul>
<p>These specifications are based on production deployments and should provide sufficient resources for stable operation as
a follower node.</p>
<h2 id="building-the-node"><a class="header" href="#building-the-node">Building the Node</a></h2>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h3>
<ul>
<li>Rust toolchain (stable)</li>
<li>Cargo package manager</li>
</ul>
<h3 id="compilation"><a class="header" href="#compilation">Compilation</a></h3>
<p>To build the rollup node binary:</p>
<pre><code class="language-bash">cargo build --release --bin rollup-node
</code></pre>
<p>This will create an optimized production binary at <code>target/release/rollup-node</code>.</p>
<p>For development builds (faster compilation, slower runtime):</p>
<pre><code class="language-bash">cargo build --bin rollup-node
</code></pre>
<h2 id="running-the-node"><a class="header" href="#running-the-node">Running the Node</a></h2>
<h3 id="basic-command"><a class="header" href="#basic-command">Basic Command</a></h3>
<p>To run the node as a follower:</p>
<pre><code class="language-bash">./target/release/rollup-node node \
  --chain &lt;CHAIN_NAME&gt; \
  --l1.url &lt;L1_RPC_URL&gt; \
  --blob.s3_url &lt;BLOB_SOURCE_URL&gt; \
  --http \
  --http.addr 0.0.0.0 \
  --http.port 8545
</code></pre>
<p>Replace:</p>
<ul>
<li><code>&lt;CHAIN_NAME&gt;</code>: The chain to follow (e.g., <code>scroll-mainnet</code>, <code>scroll-sepolia</code>, or <code>dev</code>)</li>
<li><code>&lt;L1_RPC_URL&gt;</code>: HTTP(S) URL of an Ethereum L1 RPC endpoint</li>
<li><code>&lt;BLOB_SOURCE_URL&gt;</code>: Blob data source URL (use Scroll’s S3 URLs or your own beacon node)</li>
</ul>
<h3 id="essential-configuration-flags"><a class="header" href="#essential-configuration-flags">Essential Configuration Flags</a></h3>
<h4 id="chain-configuration"><a class="header" href="#chain-configuration">Chain Configuration</a></h4>
<ul>
<li><code>--chain &lt;CHAIN&gt;</code>: Specify the chain to sync (<code>scroll-mainnet</code>, <code>scroll-sepolia</code>, or <code>dev</code>)</li>
<li><code>-d, --datadir &lt;PATH&gt;</code>: Directory for node data storage (default: platform-specific)</li>
</ul>
<h4 id="l1-provider-configuration"><a class="header" href="#l1-provider-configuration">L1 Provider Configuration</a></h4>
<ul>
<li><code>--l1.url &lt;URL&gt;</code>: L1 Ethereum RPC endpoint URL (required for follower nodes)</li>
<li><code>--l1.cups &lt;NUMBER&gt;</code>: Compute units per second for rate limiting (default: 1000)</li>
<li><code>--l1.max-retries &lt;NUMBER&gt;</code>: Maximum retry attempts for L1 requests (default: 10)</li>
<li><code>--l1.initial-backoff &lt;MS&gt;</code>: Initial backoff duration for retries in milliseconds (default: 100)</li>
<li><code>--l1.query-range &lt;BLOCKS&gt;</code>: Block range for querying L1 logs (default: 2000)</li>
</ul>
<h4 id="blob-provider-configuration"><a class="header" href="#blob-provider-configuration">Blob Provider Configuration</a></h4>
<p>The node requires access to blob data for derivation. Configure one or more blob sources:</p>
<ul>
<li><code>--blob.beacon_node_urls &lt;URL&gt;</code>: Beacon node URLs for fetching blobs (comma-separated for multiple)</li>
<li><code>--blob.s3_url &lt;URL&gt;</code>: S3-compatible storage URL for blob data</li>
<li><code>--blob.anvil_url &lt;URL&gt;</code>: Anvil blob provider URL (for testing)</li>
</ul>
<p><strong>Scroll-Provided S3 Blob Storage:</strong></p>
<p>Scroll provides public S3 blob storage endpoints for both networks:</p>
<ul>
<li><strong>Mainnet</strong>: <code>https://scroll-mainnet-blob-data.s3.us-west-2.amazonaws.com/</code></li>
<li><strong>Sepolia</strong>: <code>https://scroll-sepolia-blob-data.s3.us-west-2.amazonaws.com/</code></li>
</ul>
<p>These can be used as reliable blob sources without requiring your own beacon node infrastructure.</p>
<h4 id="consensus-configuration"><a class="header" href="#consensus-configuration">Consensus Configuration</a></h4>
<ul>
<li><code>--consensus.algorithm &lt;ALGORITHM&gt;</code>: Consensus algorithm to use
<ul>
<li><code>system-contract</code> (default): Validates blocks against authorized signer from L1</li>
<li><code>noop</code>: No consensus validation (testing only)</li>
</ul>
</li>
<li><code>--consensus.authorized-signer &lt;ADDRESS&gt;</code>: Static authorized signer address (when using system-contract without L1
provider)</li>
</ul>
<h4 id="database-configuration"><a class="header" href="#database-configuration">Database Configuration</a></h4>
<ul>
<li><code>--rollup-node-db.path &lt;PATH&gt;</code>: Custom database path (default: <code>&lt;datadir&gt;/scroll.db</code>)</li>
</ul>
<h4 id="network-configuration"><a class="header" href="#network-configuration">Network Configuration</a></h4>
<ul>
<li><code>--network.bridge</code>: Enable bridging blocks from eth wire to scroll wire protocol (default: true)</li>
<li><code>--network.scroll-wire</code>: Enable the scroll wire protocol (default: true)</li>
<li><code>--network.sequencer-url &lt;URL&gt;</code>: Sequencer RPC URL for following the sequencer</li>
<li><code>--network.valid_signer &lt;ADDRESS&gt;</code>: Valid signer address for network validation</li>
</ul>
<h4 id="chain-orchestrator-configuration"><a class="header" href="#chain-orchestrator-configuration">Chain Orchestrator Configuration</a></h4>
<ul>
<li><code>--chain.optimistic-sync-trigger &lt;BLOCKS&gt;</code>: Block gap that triggers optimistic sync (default: 100)</li>
<li><code>--chain.chain-buffer-size &lt;SIZE&gt;</code>: In-memory chain buffer size (default: 100)</li>
</ul>
<h4 id="engine-configuration"><a class="header" href="#engine-configuration">Engine Configuration</a></h4>
<ul>
<li><code>--engine.sync-at-startup</code>: Attempt to sync on startup (default: true)</li>
</ul>
<h4 id="http-rpc-configuration"><a class="header" href="#http-rpc-configuration">HTTP RPC Configuration</a></h4>
<ul>
<li><code>--http</code>: Enable HTTP RPC server</li>
<li><code>--http.addr &lt;ADDRESS&gt;</code>: HTTP server listening address (default: 127.0.0.1)</li>
<li><code>--http.port &lt;PORT&gt;</code>: HTTP server port (default: 8545)</li>
<li><code>--http.api &lt;APIS&gt;</code>: Enabled RPC API namespaces (comma-separated)
<ul>
<li>Available: <code>admin</code>, <code>debug</code>, <code>eth</code>, <code>net</code>, <code>trace</code>, <code>txpool</code>, <code>web3</code>, <code>rpc</code>, <code>reth</code>, <code>ots</code></li>
</ul>
</li>
<li><code>--http.corsdomain &lt;ORIGINS&gt;</code>: CORS allowed origins (comma-separated)</li>
</ul>
<h4 id="rollup-node-rpc"><a class="header" href="#rollup-node-rpc">Rollup Node RPC</a></h4>
<ul>
<li><code>--rpc.rollup-node=false</code>: Disable the rollup node basic RPC namespace(default: enabled) (provides rollup-specific methods)</li>
<li><code>--rpc.rollup-node-admin</code>: Enable the rollup node admin RPC namespace (provides rollup-specific methods)</li>
</ul>
<h3 id="example-configurations"><a class="header" href="#example-configurations">Example Configurations</a></h3>
<h4 id="scroll-mainnet-follower"><a class="header" href="#scroll-mainnet-follower">Scroll Mainnet Follower</a></h4>
<pre><code class="language-bash">./target/release/rollup-node node \
  --chain scroll-mainnet \
  --datadir /var/lib/scroll-node \
  --l1.url https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY \
  --blob.s3_url https://scroll-mainnet-blob-data.s3.us-west-2.amazonaws.com/ \
  --http \
  --http.addr 0.0.0.0 \
  --http.port 8545 \
  --http.api eth,net,web3,debug,trace
</code></pre>
<h4 id="scroll-sepolia-testnet-follower"><a class="header" href="#scroll-sepolia-testnet-follower">Scroll Sepolia Testnet Follower</a></h4>
<pre><code class="language-bash">./target/release/rollup-node node \
  --chain scroll-sepolia \
  --datadir /var/lib/scroll-node-sepolia \
  --l1.url https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY \
  --blob.s3_url https://scroll-sepolia-blob-data.s3.us-west-2.amazonaws.com/ \
  --http \
  --http.addr 0.0.0.0 \
  --http.port 8545 \
  --http.api eth,net,web3
</code></pre>
<h2 id="logging-and-debugging"><a class="header" href="#logging-and-debugging">Logging and Debugging</a></h2>
<p>The node uses Rust’s <code>tracing</code> framework for structured logging. Configure log levels using the <code>RUST_LOG</code> environment
variable.</p>
<h3 id="log-level-configuration"><a class="header" href="#log-level-configuration">Log Level Configuration</a></h3>
<p>The general format is: <code>RUST_LOG=&lt;default_level&gt;,&lt;target&gt;=&lt;level&gt;,...</code></p>
<h4 id="recommended-log-configuration"><a class="header" href="#recommended-log-configuration">Recommended Log Configuration</a></h4>
<p>For production with detailed rollup-specific logging:</p>
<pre><code class="language-bash">RUST_LOG=info,scroll=trace,rollup=trace,sqlx=off,scroll_txpool=trace ./target/release/rollup-node node ...
</code></pre>
<p>This configuration:</p>
<ul>
<li>Sets default log level to <code>info</code></li>
<li>Enables detailed <code>trace</code> logging for scroll-specific components</li>
<li>Enables detailed <code>trace</code> logging for rollup components</li>
<li>Disables verbose sqlx database query logging</li>
<li>Enables detailed <code>trace</code> logging for transaction pool operations</li>
</ul>
<h3 id="useful-log-targets"><a class="header" href="#useful-log-targets">Useful Log Targets</a></h3>
<p>For debugging specific components, you can adjust individual log targets:</p>
<h4 id="l1-watcher"><a class="header" href="#l1-watcher">L1 Watcher</a></h4>
<pre><code class="language-bash">RUST_LOG=scroll::watcher=debug
</code></pre>
<p>Monitor L1 event watching, batch commits, and chain reorganizations.</p>
<h4 id="derivation-pipeline"><a class="header" href="#derivation-pipeline">Derivation Pipeline</a></h4>
<pre><code class="language-bash">RUST_LOG=scroll::derivation_pipeline=debug
</code></pre>
<p>Track batch decoding and payload attribute streaming.</p>
<h4 id="engine-driver"><a class="header" href="#engine-driver">Engine Driver</a></h4>
<pre><code class="language-bash">RUST_LOG=scroll::engine=debug
</code></pre>
<p>Debug engine API interactions and forkchoice updates.</p>
<h4 id="network-layer"><a class="header" href="#network-layer">Network Layer</a></h4>
<pre><code class="language-bash">RUST_LOG=scroll::network=debug
</code></pre>
<p>Monitor P2P networking and block propagation.</p>
<h4 id="database-operations"><a class="header" href="#database-operations">Database Operations</a></h4>
<pre><code class="language-bash">RUST_LOG=scroll::db=debug
</code></pre>
<p>Debug database queries and operations.</p>
<h3 id="log-level-options"><a class="header" href="#log-level-options">Log Level Options</a></h3>
<p>Available log levels (from least to most verbose):</p>
<ul>
<li><code>error</code>: Only error messages</li>
<li><code>warn</code>: Warnings and errors</li>
<li><code>info</code>: General informational messages (recommended for production)</li>
<li><code>debug</code>: Detailed debugging information</li>
<li><code>trace</code>: Very detailed trace information (use for specific debugging)</li>
</ul>
<h3 id="combined-example-with-logging"><a class="header" href="#combined-example-with-logging">Combined Example with Logging</a></h3>
<pre><code class="language-bash">RUST_LOG=info,scroll=debug,rollup=debug,sqlx=off \
./target/release/rollup-node node \
  --chain scroll \
  --datadir /var/lib/scroll-node \
  --l1.url https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY \
  --blob.s3_url https://scroll-mainnet-blob-data.s3.us-west-2.amazonaws.com/ \
  --http \
  --http.addr 0.0.0.0 \
  --http.port 8545 \
  --http.api eth,net,web3
</code></pre>
<h2 id="verifying-node-operation"><a class="header" href="#verifying-node-operation">Verifying Node Operation</a></h2>
<h3 id="check-sync-status"><a class="header" href="#check-sync-status">Check Sync Status</a></h3>
<p>Once the node is running, you can verify it’s syncing properly:</p>
<pre><code class="language-bash">curl -X POST http://localhost:8545 \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "eth_syncing",
    "params": [],
    "id": 1
  }'
</code></pre>
<h3 id="get-latest-block"><a class="header" href="#get-latest-block">Get Latest Block</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:8545 \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "eth_blockNumber",
    "params": [],
    "id": 1
  }'
</code></pre>
<h3 id="check-node-health"><a class="header" href="#check-node-health">Check Node Health</a></h3>
<p>Monitor the node logs for:</p>
<ul>
<li>Successful L1 event processing</li>
<li>Block derivation progress</li>
<li>Engine API health</li>
<li>Database operations</li>
</ul>
<p>Look for log entries indicating successful block processing and chain advancement.</p>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h3>
<p><strong>Node not syncing:</strong></p>
<ul>
<li>Verify L1 RPC endpoint is accessible and synced</li>
<li>Ensure beacon node URLs are correct and responsive</li>
<li>Check network connectivity</li>
<li>Review logs with <code>RUST_LOG=debug</code> for detailed error messages</li>
</ul>
<p><strong>High memory usage:</strong></p>
<ul>
<li>Adjust <code>--chain.chain-buffer-size</code> to reduce memory footprint</li>
<li>Ensure system has adequate RAM (16GB recommended)</li>
</ul>
<p><strong>Database errors:</strong></p>
<ul>
<li>Verify disk space is available</li>
<li>Check file permissions on datadir</li>
<li>Consider using a different database path with <code>--datadir</code></li>
</ul>
<p><strong>L1 connection errors:</strong></p>
<ul>
<li>Verify L1 RPC endpoint is reliable and has sufficient rate limits</li>
<li>Adjust <code>--l1.max-retries</code> and <code>--l1.initial-backoff</code> for unstable connections</li>
<li>Consider using a dedicated or archive L1 node</li>
</ul>
<p>For additional support and detailed implementation information, refer to the project’s CLAUDE.md and source code
documentation.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="running-with-docker-compose"><a class="header" href="#running-with-docker-compose">Running with Docker Compose</a></h1>
<p>This guide covers how to run the Scroll rollup node using Docker Compose. The Docker setup provides a complete
environment including the rollup node, monitoring infrastructure, and optional L1 devnet for shadow-fork testing.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The Docker Compose stack includes the following services:</p>
<ul>
<li><strong>rollup-node</strong>: The main Scroll rollup node</li>
<li><strong>prometheus</strong>: Metrics collection and time-series database</li>
<li><strong>grafana</strong>: Visualization dashboard for metrics</li>
<li><strong>l1-devnet</strong> (optional): Local L1 Ethereum node for shadow-fork mode</li>
</ul>
<h2 id="prerequisites-1"><a class="header" href="#prerequisites-1">Prerequisites</a></h2>
<ul>
<li><a href="https://docs.docker.com/get-docker/">Docker</a> installed (version 20.10 or later)</li>
<li><a href="https://docs.docker.com/compose/install/">Docker Compose</a> installed (version 1.28 or later)</li>
<li>At least 16 GB RAM</li>
<li>Sufficient disk space for chain data</li>
</ul>
<h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<h3 id="1-navigate-to-docker-compose-directory"><a class="header" href="#1-navigate-to-docker-compose-directory">1. Navigate to Docker Compose Directory</a></h3>
<pre><code class="language-bash">cd docker-compose
</code></pre>
<h3 id="2-configure-environment"><a class="header" href="#2-configure-environment">2. Configure Environment</a></h3>
<p>The docker-compose setup uses a <code>.env</code> file for configuration. You <strong>must</strong> configure your own L1 RPC and beacon node
endpoints.</p>
<p>Key environment variables:</p>
<ul>
<li><code>ENV</code>: The network to connect to (<code>sepolia</code>, <code>mainnet</code>, or <code>dev</code>)</li>
<li><code>SHADOW_FORK</code>: Enable shadow-fork mode (<code>true</code> or <code>false</code>)</li>
<li><code>FORK_BLOCK_NUMBER</code>: Block number to fork from (when shadow-fork is enabled)</li>
<li><code>L1_URL</code>: Your L1 Ethereum RPC endpoint URL (e.g., Alchemy, Infura, QuickNode)</li>
<li><code>BEACON_URL</code>: Your beacon node URL for blob data</li>
</ul>
<p><strong>Note</strong>: You must provide your own RPC endpoints. Configure these in your <code>.env</code> file before starting the stack.</p>
<h3 id="3-start-the-stack"><a class="header" href="#3-start-the-stack">3. Start the Stack</a></h3>
<p>For standard operation (following public networks):</p>
<pre><code class="language-bash">docker compose up -d
</code></pre>
<p>For shadow-fork mode:</p>
<pre><code class="language-bash">docker compose --profile shadow-fork up -d
</code></pre>
<h3 id="4-access-the-services"><a class="header" href="#4-access-the-services">4. Access the Services</a></h3>
<p>Once running, the following endpoints are available:</p>
<ul>
<li><strong>Rollup Node JSON-RPC</strong>: <a href="http://localhost:8545">http://localhost:8545</a></li>
<li><strong>Rollup Node WebSocket</strong>: <a href="ws://localhost:8546">ws://localhost:8546</a></li>
<li><strong>Rollup Node Metrics</strong>: <a href="http://localhost:6060/metrics">http://localhost:6060/metrics</a></li>
<li><strong>Prometheus UI</strong>: <a href="http://localhost:19090">http://localhost:19090</a></li>
<li><strong>Grafana Dashboards</strong>: <a href="http://localhost:13000">http://localhost:13000</a></li>
</ul>
<h2 id="operating-modes"><a class="header" href="#operating-modes">Operating Modes</a></h2>
<h3 id="standard-mode-follower-node"><a class="header" href="#standard-mode-follower-node">Standard Mode (Follower Node)</a></h3>
<p>Standard mode connects the rollup node to public Scroll networks (Sepolia or Mainnet).</p>
<h4 id="sepolia-testnet"><a class="header" href="#sepolia-testnet">Sepolia Testnet</a></h4>
<p>Edit your <code>.env</code> file with your RPC endpoints:</p>
<pre><code class="language-env">ENV=sepolia
SHADOW_FORK=false
L1_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
BEACON_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
</code></pre>
<p>Replace <code>YOUR_API_KEY</code> with your actual API key from your RPC provider (Alchemy, Infura, QuickNode, etc.).</p>
<p>Start the services:</p>
<pre><code class="language-bash">docker compose up -d
</code></pre>
<p>The node will:</p>
<ul>
<li>Connect to your configured L1 RPC endpoint</li>
<li>Connect to your configured beacon node</li>
<li>Sync from the Scroll Sepolia network</li>
<li>Connect to trusted peers on the network</li>
</ul>
<h4 id="mainnet"><a class="header" href="#mainnet">Mainnet</a></h4>
<p>Edit your <code>.env</code> file with your RPC endpoints:</p>
<pre><code class="language-env">ENV=mainnet
SHADOW_FORK=false
L1_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
BEACON_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
</code></pre>
<p>Replace <code>YOUR_API_KEY</code> with your actual API key from your RPC provider (Alchemy, Infura, QuickNode, etc.).</p>
<p>Start the services:</p>
<pre><code class="language-bash">docker compose up -d
</code></pre>
<p>The node will:</p>
<ul>
<li>Connect to your configured L1 RPC endpoint</li>
<li>Connect to your configured beacon node</li>
<li>Sync from the Scroll Mainnet network</li>
<li>Connect to trusted peers on the network</li>
</ul>
<h3 id="shadow-fork-mode"><a class="header" href="#shadow-fork-mode">Shadow-Fork Mode</a></h3>
<p>Shadow-fork mode runs the rollup node against a forked L1 chain, useful for testing and development without affecting
the live network.</p>
<h4 id="configuration"><a class="header" href="#configuration">Configuration</a></h4>
<p>Edit your <code>.env</code> file:</p>
<pre><code class="language-env">ENV=sepolia  # or mainnet
SHADOW_FORK=true
FORK_BLOCK_NUMBER=8700000  # Adjust to your desired fork point
</code></pre>
<h4 id="starting-shadow-fork"><a class="header" href="#starting-shadow-fork">Starting Shadow-Fork</a></h4>
<pre><code class="language-bash">docker compose --profile shadow-fork up -d
</code></pre>
<p>This will:</p>
<ol>
<li>Start an L1 devnet (Anvil) forked from the specified block</li>
<li>Start the rollup node configured to use the local L1 devnet</li>
<li>Start Prometheus and Grafana for monitoring</li>
</ol>
<h4 id="how-shadow-fork-works"><a class="header" href="#how-shadow-fork-works">How Shadow-Fork Works</a></h4>
<p>The <code>l1-devnet</code> service uses Foundry’s Anvil to create a local fork:</p>
<pre><code class="language-bash">anvil --fork-url &lt;SCROLL_L1_RPC&gt; \
      --fork-block-number &lt;FORK_BLOCK_NUMBER&gt; \
      --chain-id &lt;CHAIN_ID&gt; \
      --host 0.0.0.0 \
      --block-time 12
</code></pre>
<p>The rollup node then connects to this local L1 at <code>http://l1-devnet:8545</code> instead of the public L1 RPC.</p>
<h4 id="use-cases"><a class="header" href="#use-cases">Use Cases</a></h4>
<p>Shadow-fork mode is ideal for:</p>
<ul>
<li>Testing node behavior at specific block heights</li>
<li>Debugging derivation issues</li>
<li>Development without consuming testnet resources</li>
<li>Simulating historical scenarios</li>
</ul>
<h3 id="development-mode"><a class="header" href="#development-mode">Development Mode</a></h3>
<p>For local development with a completely isolated environment:</p>
<pre><code class="language-env">ENV=dev
</code></pre>
<p>This mode:</p>
<ul>
<li>Uses the <code>dev</code> chain spec</li>
<li>Enables sequencer mode</li>
<li>Bypasses signing requirements with <code>--test</code> flag</li>
<li>Disables peer discovery</li>
<li>Sets fast block times (250ms)</li>
</ul>
<h3 id="configuring-rpc-endpoints"><a class="header" href="#configuring-rpc-endpoints">Configuring RPC Endpoints</a></h3>
<p>You <strong>must</strong> configure your own L1 RPC and beacon node URLs using a provider of your choice:</p>
<p><strong>Recommended Providers:</strong></p>
<ul>
<li><a href="https://www.alchemy.com/">Alchemy</a> - Offers free tier with generous limits</li>
<li><a href="https://infura.io/">Infura</a> - Reliable infrastructure with free tier</li>
<li><a href="https://www.quicknode.com/">QuickNode</a> - High-performance nodes</li>
<li>Your own self-hosted L1 archive node</li>
</ul>
<p><strong>Requirements:</strong></p>
<ul>
<li>L1 RPC endpoint must support Ethereum mainnet or Sepolia testnet</li>
<li>Beacon node must provide EIP-4844 blob data access</li>
<li>Both endpoints should be reliable with good uptime</li>
</ul>
<h4 id="configuration-priority"><a class="header" href="#configuration-priority">Configuration Priority</a></h4>
<p>The launch script determines which URLs to use in this order:</p>
<ol>
<li><strong>User-provided URLs</strong> (via <code>L1_URL</code> or <code>BEACON_URL</code>) - highest priority</li>
<li><strong>Shadow-fork URLs</strong> (if <code>SHADOW_FORK=true</code>) - uses local L1 devnet</li>
<li><strong>Error</strong> - If no URLs are configured and not in shadow-fork mode, the node will fail to start</li>
</ol>
<h4 id="example-using-alchemy-for-sepolia"><a class="header" href="#example-using-alchemy-for-sepolia">Example: Using Alchemy for Sepolia</a></h4>
<p>Edit your <code>.env</code> file:</p>
<pre><code class="language-env">ENV=sepolia
SHADOW_FORK=false
L1_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
BEACON_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
</code></pre>
<p>Then start:</p>
<pre><code class="language-bash">docker compose up -d
</code></pre>
<h4 id="verifying-rpc-connectivity"><a class="header" href="#verifying-rpc-connectivity">Verifying RPC Connectivity</a></h4>
<p>After starting the node, verify connectivity to your RPC endpoints by checking the logs:</p>
<pre><code class="language-bash">docker compose logs rollup-node | grep -i "l1\|beacon"
</code></pre>
<p>You should see logs indicating successful connection to your configured endpoints. If you see connection errors, verify
your URLs and API keys are correct.</p>
<h2 id="service-details"><a class="header" href="#service-details">Service Details</a></h2>
<h3 id="rollup-node-service"><a class="header" href="#rollup-node-service">Rollup Node Service</a></h3>
<p><strong>Image</strong>: <code>scrolltech/rollup-node:v0.0.1-rc67</code></p>
<p><strong>Port Mappings</strong>:</p>
<ul>
<li><code>8545</code>: JSON-RPC interface</li>
<li><code>8546</code>: WebSocket interface</li>
<li><code>6060</code>: Metrics endpoint</li>
</ul>
<p><strong>Volumes</strong>:</p>
<ul>
<li><code>./volumes/l2reth</code>: Node data directory (chain state, database)</li>
<li><code>./launch_rollup_node.bash</code>: Entrypoint script (read-only)</li>
</ul>
<p><strong>Configuration</strong>:</p>
<p>The <code>launch_rollup_node.bash</code> script configures the node based on the <code>ENV</code> variable:</p>
<ul>
<li><strong>dev</strong>: Local sequencer mode with fast block times</li>
<li><strong>sepolia</strong>: Sepolia follower with optional shadow-fork</li>
<li><strong>mainnet</strong>: Mainnet follower with optional shadow-fork</li>
</ul>
<p>Key command-line flags used:</p>
<pre><code class="language-bash">--chain &lt;CHAIN&gt;           # Chain specification
--datadir=/l2reth         # Data directory
--metrics=0.0.0.0:6060    # Metrics endpoint
--disable-discovery       # P2P discovery disabled in Docker
--http --http.addr=0.0.0.0 --http.port=8545
--ws --ws.addr=0.0.0.0 --ws.port=8546
--http.api admin,debug,eth,net,trace,txpool,web3,rpc,reth,ots,flashbots,miner,mev
--l1.url &lt;URL&gt;                      # L1 RPC endpoint
--blob.beacon_node_urls &lt;URLS&gt;      # Beacon node endpoint
--blob.s3_url &lt;URL&gt;                 # S3 Blob URL
--trusted-peers &lt;PEERS&gt;             # Trusted P2P peers
</code></pre>
<h3 id="l1-devnet-service-shadow-fork-only"><a class="header" href="#l1-devnet-service-shadow-fork-only">L1 Devnet Service (Shadow-Fork Only)</a></h3>
<p><strong>Image</strong>: <code>ghcr.io/foundry-rs/foundry:v1.2.3</code></p>
<p><strong>Port Mappings</strong>:</p>
<ul>
<li><code>8543</code>: JSON-RPC interface (mapped from internal 8545)</li>
<li><code>8544</code>: WebSocket interface (mapped from internal 8546)</li>
</ul>
<p><strong>Volumes</strong>:</p>
<ul>
<li><code>./volumes/l1devnet</code>: Anvil state directory</li>
<li><code>./launch_l1.bash</code>: Entrypoint script (read-only)</li>
</ul>
<p><strong>Profile</strong>: <code>shadow-fork</code> (only starts when this profile is active)</p>
<h3 id="prometheus-service"><a class="header" href="#prometheus-service">Prometheus Service</a></h3>
<p><strong>Image</strong>: <code>prom/prometheus:v3.3.1</code></p>
<p><strong>Port Mappings</strong>:</p>
<ul>
<li><code>19090</code>: Prometheus web UI</li>
</ul>
<p><strong>Volumes</strong>:</p>
<ul>
<li><code>./resource/prometheus.yml</code>: Configuration file (read-only)</li>
<li><code>./volumes/prometheus</code>: Time-series database storage</li>
</ul>
<p><strong>Configuration</strong>:</p>
<p>Prometheus scrapes metrics from the rollup node every 10 seconds at <code>http://rollup-node:6060/metrics</code>. The configuration
includes:</p>
<ul>
<li><strong>Scrape interval</strong>: 10 seconds</li>
<li><strong>Retention time</strong>: 1 day</li>
<li><strong>Retention size</strong>: 512 MB</li>
<li><strong>WAL compression</strong>: Enabled</li>
</ul>
<h3 id="grafana-service"><a class="header" href="#grafana-service">Grafana Service</a></h3>
<p><strong>Image</strong>: <code>grafana/grafana:12.0.2</code></p>
<p><strong>Port Mappings</strong>:</p>
<ul>
<li><code>13000</code>: Grafana web UI (mapped from internal 3000)</li>
</ul>
<p><strong>Volumes</strong>:</p>
<ul>
<li><code>./resource/grafana-datasource.yml</code>: Prometheus datasource config (read-only)</li>
<li><code>./resource/grafana-dashboard-providers.yml</code>: Dashboard provider config (read-only)</li>
<li><code>./resource/dashboards/</code>: Pre-built dashboard JSON files (read-only)</li>
<li><code>./volumes/grafana</code>: Grafana database and settings</li>
</ul>
<p><strong>Configuration</strong>:</p>
<ul>
<li><strong>Anonymous access</strong>: Enabled with Admin role (for easy local access)</li>
<li><strong>Default home dashboard</strong>: Overview dashboard</li>
<li><strong>Pre-provisioned dashboards</strong>:
<ul>
<li><code>overview.json</code>: High-level node metrics</li>
<li><code>performance.json</code>: Performance and throughput metrics</li>
<li><code>state_history.json</code>: State and history metrics</li>
<li><code>transaction_pool.json</code>: Transaction pool metrics</li>
<li><code>rollup_node.json</code>: Rollup-specific metrics</li>
</ul>
</li>
</ul>
<h2 id="monitoring-and-observability"><a class="header" href="#monitoring-and-observability">Monitoring and Observability</a></h2>
<h3 id="accessing-grafana-dashboards"><a class="header" href="#accessing-grafana-dashboards">Accessing Grafana Dashboards</a></h3>
<ol>
<li>Open <a href="http://localhost:13000">http://localhost:13000</a> in your browser</li>
<li>No login required (anonymous access enabled)</li>
<li>Select from pre-configured dashboards in the sidebar</li>
</ol>
<h3 id="available-dashboards"><a class="header" href="#available-dashboards">Available Dashboards</a></h3>
<h4 id="overview-dashboard"><a class="header" href="#overview-dashboard">Overview Dashboard</a></h4>
<p>Provides high-level metrics including:</p>
<ul>
<li>Block production rate</li>
<li>Sync status</li>
<li>L1/L2 block heights</li>
<li>Network peer count</li>
</ul>
<h4 id="performance-dashboard"><a class="header" href="#performance-dashboard">Performance Dashboard</a></h4>
<p>Detailed performance metrics:</p>
<ul>
<li>CPU and memory usage</li>
<li>Database operations per second</li>
<li>RPC request latency</li>
<li>Block processing time</li>
</ul>
<h4 id="transaction-pool-dashboard"><a class="header" href="#transaction-pool-dashboard">Transaction Pool Dashboard</a></h4>
<p>Transaction pool monitoring:</p>
<ul>
<li>Pending transaction count</li>
<li>Transaction pool size</li>
<li>Transaction arrival rate</li>
<li>Gas price distribution</li>
</ul>
<h4 id="rollup-node-dashboard"><a class="header" href="#rollup-node-dashboard">Rollup Node Dashboard</a></h4>
<p>Rollup-specific metrics:</p>
<ul>
<li>L1 batch processing</li>
<li>Derivation pipeline throughput</li>
<li>Engine API calls</li>
<li>Consolidation status</li>
</ul>
<h3 id="prometheus-queries"><a class="header" href="#prometheus-queries">Prometheus Queries</a></h3>
<p>Access Prometheus at <a href="http://localhost:19090">http://localhost:19090</a> to run custom queries.</p>
<p>Example queries:</p>
<pre><code class="language-promql"># Current block height
scroll_block_height

# Block processing rate (blocks per second)
rate(scroll_blocks_processed_total[1m])

# L1 batch processing time
histogram_quantile(0.95, scroll_l1_batch_processing_seconds_bucket)

# RPC request rate by method
rate(scroll_rpc_requests_total[5m])
</code></pre>
<h3 id="viewing-logs"><a class="header" href="#viewing-logs">Viewing Logs</a></h3>
<h4 id="all-services"><a class="header" href="#all-services">All Services</a></h4>
<pre><code class="language-bash">docker compose logs -f
</code></pre>
<h4 id="specific-service"><a class="header" href="#specific-service">Specific Service</a></h4>
<pre><code class="language-bash">docker compose logs -f rollup-node
docker compose logs -f prometheus
docker compose logs -f grafana
</code></pre>
<h4 id="with-timestamps"><a class="header" href="#with-timestamps">With Timestamps</a></h4>
<pre><code class="language-bash">docker compose logs -f -t rollup-node
</code></pre>
<h4 id="last-n-lines"><a class="header" href="#last-n-lines">Last N Lines</a></h4>
<pre><code class="language-bash">docker compose logs --tail=100 rollup-node
</code></pre>
<h2 id="volume-management"><a class="header" href="#volume-management">Volume Management</a></h2>
<h3 id="data-persistence"><a class="header" href="#data-persistence">Data Persistence</a></h3>
<p>The Docker Compose setup uses local volumes in <code>./volumes/</code> to persist data:</p>
<pre><code>volumes/
├── l1devnet/      # L1 devnet state (shadow-fork only)
├── l2reth/        # Rollup node data (chain state, database)
├── prometheus/    # Prometheus time-series data
└── grafana/       # Grafana configuration and dashboards
</code></pre>
<h3 id="backing-up-data"><a class="header" href="#backing-up-data">Backing Up Data</a></h3>
<p>To backup your node data:</p>
<pre><code class="language-bash"># Stop the services first
docker compose down

# Create a backup
tar -czf backup-$(date +%Y%m%d).tar.gz volumes/

# Restart services
docker compose up -d
</code></pre>
<h3 id="resetting-node-data"><a class="header" href="#resetting-node-data">Resetting Node Data</a></h3>
<p>To completely reset and resync:</p>
<pre><code class="language-bash"># Stop services
docker compose down

# Remove all volumes
rm -rf volumes/

# Restart (will create fresh volumes)
docker compose up -d
</code></pre>
<h3 id="resetting-specific-services"><a class="header" href="#resetting-specific-services">Resetting Specific Services</a></h3>
<pre><code class="language-bash"># Reset only L2 node data
docker compose down
rm -rf volumes/l2reth/
docker compose up -d

# Reset only monitoring data
docker compose down
rm -rf volumes/prometheus/ volumes/grafana/
docker compose up -d
</code></pre>
<h2 id="network-configuration-1"><a class="header" href="#network-configuration-1">Network Configuration</a></h2>
<h3 id="port-usage"><a class="header" href="#port-usage">Port Usage</a></h3>
<p>The Docker Compose stack uses the following host ports:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Service</th><th>Port</th><th>Protocol</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td>rollup-node</td><td>8545</td><td>HTTP</td><td>JSON-RPC API</td></tr>
<tr><td>rollup-node</td><td>8546</td><td>WebSocket</td><td>WebSocket API</td></tr>
<tr><td>rollup-node</td><td>6060</td><td>HTTP</td><td>Metrics endpoint</td></tr>
<tr><td>l1-devnet</td><td>8543</td><td>HTTP</td><td>L1 JSON-RPC (shadow-fork)</td></tr>
<tr><td>l1-devnet</td><td>8544</td><td>WebSocket</td><td>L1 WebSocket (shadow-fork)</td></tr>
<tr><td>prometheus</td><td>19090</td><td>HTTP</td><td>Prometheus UI</td></tr>
<tr><td>grafana</td><td>13000</td><td>HTTP</td><td>Grafana UI</td></tr>
</tbody>
</table>
</div>
<h2 id="troubleshooting-1"><a class="header" href="#troubleshooting-1">Troubleshooting</a></h2>
<h3 id="rollup-node-not-syncing"><a class="header" href="#rollup-node-not-syncing">Rollup Node Not Syncing</a></h3>
<p><strong>Check L1 connectivity:</strong></p>
<p>For shadow-fork mode, ensure l1-devnet is running:</p>
<pre><code class="language-bash">docker compose ps l1-devnet
</code></pre>
<p>For standard mode, verify L1 RPC endpoint is accessible.</p>
<p><strong>Check logs for derivation errors:</strong></p>
<pre><code class="language-bash">docker compose logs -f rollup-node | grep -i error
</code></pre>
<p><strong>Verify beacon node connectivity:</strong></p>
<pre><code class="language-bash"># From within the container
docker compose exec rollup-node curl http://l1reth-cl.sepolia.scroll.tech:5052/eth/v1/node/health
</code></pre>
<h3 id="shadow-fork-l1-devnet-issues"><a class="header" href="#shadow-fork-l1-devnet-issues">Shadow-Fork L1 Devnet Issues</a></h3>
<p><strong>Check Anvil is forking correctly:</strong></p>
<pre><code class="language-bash">docker compose logs l1-devnet
</code></pre>
<p><strong>Verify fork block number exists:</strong></p>
<p>Ensure <code>FORK_BLOCK_NUMBER</code> is not ahead of the current L1 chain tip.</p>
<p><strong>Test L1 devnet connectivity:</strong></p>
<pre><code class="language-bash">curl -X POST http://localhost:8543 \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "eth_blockNumber",
    "params": [],
    "id": 1
  }'
</code></pre>
<h2 id="more"><a class="header" href="#more">More</a></h2>
<p>For general node operation and configuration, see the <a href="#running-a-scroll-rollup-node">Running a Node</a> guide.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
